# SnapSort - 智能截图分类管理应用 PRD

## 1. 产品概述

SnapSort 是一款 macOS 应用，能够自动监测系统截图，对截图进行 OCR 文本识别，使用 AI 将截图分类到用户自定义的不同目录中。
该应用旨在帮助用户高效管理众多截图，提高工作效率并保持文件管理的整洁。

## 2. 核心功能

### 2.1 截图监测

- 监测系统默认截图行为（Command + Shift + 3）
- 实时检测新生成的截图文件
- 后台运行，无需用户主动打开应用
- 系统启动时自动运行

### 2.2 OCR 文本识别

- 支持中文、日文、英文三国语言的识别
- 架构设计支持快速扩展其他语言
- 高精确度的文本识别要求
- 低资源消耗的识别实现

### 2.3 AI 智能分类

- 基于 OCR 识别结果，对截图内容进行智能分类
- 利用历史分类和用户自定义分类作为上下文辅助决策
- 当发现无法匹配现有分类时，提示用户是否创建新分类
- 低 CPU 和内存占用的分类算法实现
- 使用 DeepSeek API 进行智能分类处理

### 2.4 文件管理

- 将原始截图文件移动（非复制）到对应的分类目录
- 支持自定义分类目录结构
- 自动创建不存在的分类目录

### 2.5 隐私保护

- 对包含敏感信息的截图进行标记
- 支持用户自定义敏感信息类型
- 内置常见敏感信息识别规则（如密码、信用卡号、个人身份信息等）

### 2.6 搜索功能

- 基于 OCR 识别结果提供文本搜索能力
- 支持关键词和自然语言查询

## 3. 用户界面

### 3.1 主界面

- 极简设计，主要以菜单栏图标形式存在
- 无需提供截图浏览界面，用户使用 Finder 查看文件

### 3.2 设置界面

- 分类管理：添加、编辑、删除分类
- 目录设置：设置系统截图，默认存储在哪个目录
- 关键词设置：为每个分类配置相关关键词
- 敏感信息配置：自定义敏感信息类型和处理方式
- 语言设置：配置 OCR 识别的优先语言
- 监测设置：配置监测行为（如启动时自动运行、处理频率等）

### 3.3 通知

- 分类完成通知
- 新分类创建建议通知
- 敏感信息警告通知

## 4. 技术要求

### 4.1 性能要求

- 低 CPU 占用率（<5% 平均）
- 低内存占用（<200MB）
- 快速响应截图事件（<3 秒）
- OCR 识别速度快（<5 秒/张图）

### 4.2 兼容性要求

- 支持 macOS 15 及以上版本
- 适配 Apple Silicon 和 Intel 处理器

### 4.3 安全和隐私

- 所有处理在本地完成，不上传用户数据
- 申请最小必要的系统权限
- 符合 Apple 隐私设计准则

## 5. 用户场景

### 场景一：研究员小李的学术资料整理

小李是一名计算机视觉研究员，每天需要阅读大量学术论文和技术博客。他习惯用截图来保存重要的算法公式、实验数据和关键结论。

**一天的使用流程：**

1. 早上9点，小李开始阅读最新的一篇关于神经网络的论文，他使用 Command+Shift+3 截取了5张包含关键公式和数据的图片。
2. SnapSort 在后台自动检测到这些截图，进行OCR识别并分析内容。
3. 系统识别出这些截图包含"神经网络"、"深度学习"等关键词，自动将它们移动到"学术/深度学习"目录下。
4. 下午，小李查看了一些Python代码示例，截取了3张代码片段。
5. SnapSort识别出代码内容，将这些截图归类到"代码/Python"目录。
6. 晚上回顾时，小李只需打开对应目录，所有相关截图已经按主题整齐归类，不必在默认截图文件夹中筛选数十张无序的图片。

**收益：** 小李每天节省了约20分钟的文件整理时间，研究资料更有条理，提高了工作效率。

### 场景二：设计师小王的灵感收集

小王是一名UI设计师，经常浏览各种设计网站和应用寻找灵感。她习惯对看到的优秀设计进行截图收藏。

**一周的使用体验：**

1. 周一早上，小王浏览了一个电商网站的新首页设计，截取了多张展示创新布局的截图。
2. SnapSort识别出截图内容包含"购物车"、"商品列表"等电商特征词，自动将它们分类到"设计灵感/电商"目录。
3. 周三，她研究了几款流行应用的暗黑模式实现，截取了7张展示不同元素的截图。
4. 系统检测到这些截图的共同特点是"暗色背景"和"UI元素"，但现有分类中没有匹配项。
5. SnapSort弹出提示："检测到多张暗黑模式UI设计截图，是否创建新分类?"
6. 小王确认创建"设计灵感/暗黑模式"分类，系统立即将这些截图移动到新目录。
7. 周五，她需要向客户展示暗黑模式的设计参考，只需打开对应目录即可找到所有相关素材。

**收益：** 小王的灵感素材库始终保持有序，在向客户展示参考时能迅速找到相关素材，提高了工作专业度和效率。

### 场景三：自由职业者小张的项目管理

小张同时处理多个客户项目，经常需要截取客户需求、参考资料和工作进度等信息。

**具体使用案例：**

1. 上午，小张与A客户视频会议，截取了包含项目时间线和预算的聊天记录。
2. SnapSort识别出截图内容包含"项目A"、"预算"等关键信息，将截图分类到"客户/A公司"目录。
3. 同时，系统检测到截图包含具体金额信息，标记为"包含财务敏感信息"。
4. 中午，小张收到B客户的邮件，截取了邮件中的技术规格说明。
5. 系统智能识别内容，将截图移动到"客户/B公司/技术规格"目录。
6. 下午，小张查看了一些有助于完成项目的技术教程，截取了多张代码和配置示例。
7. 这些截图被自动分类到"参考资料/技术"目录。
8. 当小张需要向A客户汇报进度时，他可以立即找到所有相关截图，无需在混乱的默认截图文件夹中寻找。

**收益：** 小张的多个项目资料互不混淆，提高了工作组织性，减少了查找资料的时间，客户满意度提升。

### 场景四：金融分析师小孙的信息安全

小孙经常需要分析财务报表和交易数据，这些信息通常包含敏感内容。

**一次关键使用体验：**

1. 小孙在分析一家公司的财务状况，截取了包含银行账号、交易金额和客户信息的多个报表截图。
2. SnapSort立即识别出这些截图包含高度敏感的财务信息。
3. 系统弹出提醒："检测到5张包含敏感财务信息的截图，已将它们标记并移动到'敏感/财务'目录"。
4. 小孙收到通知后，确认了这些截图的安全归类。
5. 当同事临时借用小孙的电脑时，这些敏感信息已经被妥善归类到特定目录，而不是散落在桌面或默认截图文件夹中。
6. 两周后，小孙需要再次查阅这些数据，通过SnapSort的搜索功能，输入"2023年Q2财报"，立即找到相关截图。

**收益：** 小孙的敏感信息得到了更好的保护，降低了信息泄露的风险，同时提高了信息检索效率。

### 场景五：学生小陈的学习笔记管理

小陈是一名计算机科学专业的学生，经常截取在线课程和学习资料中的重要内容。

**学期使用情况：**

1. 小陈正在同时学习"操作系统"、"数据结构"和"算法设计"三门课程。
2. 每天，他截取大约15-20张包含课程笔记、代码示例和重要概念的图片。
3. SnapSort自动识别截图内容中的课程相关关键词，将它们分类到对应的学科目录中。
4. 例如，包含"二叉树"、"链表"的截图被归类到"学习/数据结构"；包含"进程调度"、"内存管理"的截图被归类到"学习/操作系统"。
5. 期中考试前，小陈需要复习"排序算法"，他使用SnapSort的搜索功能，输入"快速排序"，系统立即找出所有相关截图。
6. 小陈发现一些重要的算法比较图表没有被正确分类，他手动调整了分类规则，添加了一些特定的关键词。
7. 之后，系统能更准确地识别和分类类似内容的截图。

**收益：** 小陈的学习资料按课程主题有序组织，复习时能快速找到所需内容，学习效率提高，考试成绩也有所提升。

## 6. DeepSeek API 智能分类提示词设计

为了实现高效准确的截图内容分类，SnapSort 将使用 DeepSeek API 进行 AI 分类。以下是设计的提示词模板：

### 6.1 基础提示词模板

```markdown
# 截图内容分类任务

## 任务背景
你是 SnapSort 应用中的 AI 分类助手，负责将截图的文本内容分配到最合适的分类目录中。你需要基于文本内容、用户历史分类习惯和预设分类规则来做出决策。

## 输入内容
以下是从截图中提取的 OCR 文本内容：
"""
{OCR_TEXT}
"""

## 当前用户已有分类目录
用户当前已创建并使用的分类目录如下（格式为"分类名称：相关关键词"）：
{EXISTING_CATEGORIES}

## 敏感信息类型
以下是需要特别标记的敏感信息类型：
{SENSITIVE_TYPES}

## 任务要求
1. 分析提供的文本内容，确定其主题和关键信息。
2. 判断文本是否包含任何敏感信息，如包含则需标记。
3. 将内容匹配到最合适的现有分类目录中。
4. 如果无法找到合适的现有分类，请建议创建新的分类目录。
5. 你的回答必须简洁、明确、直接，无需解释推理过程。

## 输出格式
请使用以下 JSON 格式输出你的决策：
```json
{
  "best_category": "最合适的分类目录名称",
  "confidence_score": 0.85,  // 0-1之间的置信度
  "contains_sensitive_info": false,  // true或false
  "sensitive_types": [],  // 如果包含敏感信息，列出类型
  "suggest_new_category": false,  // 是否建议创建新分类
  "suggested_category_name": "",  // 建议的新分类名称
  "suggested_keywords": []  // 建议与新分类关联的关键词
}
```

```

### 6.2 分类示例及扩展提示词

```markdown
## 分类示例参考
以下是一些分类示例，帮助你理解如何进行分类决策：

### 示例1 - 学术研究
输入文本：
"""
基于卷积神经网络的图像分类方法
ResNet-50 在 ImageNet 数据集上达到了 76.3% 的 Top-1 准确率
```python
model = tf.keras.applications.ResNet50(weights='imagenet')
```

"""
输出：

```json
{
  "best_category": "学术/深度学习",
  "confidence_score": 0.92,
  "contains_sensitive_info": false,
  "sensitive_types": [],
  "suggest_new_category": false,
  "suggested_category_name": "",
  "suggested_keywords": []
}
```

### 示例2 - 包含敏感信息

输入文本：
"""
信用卡支付明细
卡号: 4532 **** **** 1234
姓名: 张三
交易金额: ¥1,299.00
日期: 2023/04/15
"""
输出：

```json
{
  "best_category": "财务/交易记录",
  "confidence_score": 0.88,
  "contains_sensitive_info": true,
  "sensitive_types": ["信用卡信息", "财务数据"],
  "suggest_new_category": false,
  "suggested_category_name": "",
  "suggested_keywords": []
}
```

### 示例3 - 需要新分类

输入文本：
"""
健身计划 - 2023夏季
周一: 胸部和三头肌 (4组卧推, 3组飞鸟)
周三: 背部和二头肌 (3组引体向上, 4组划船)
周五: 腿部 (4组深蹲, 3组腿举)
每天: 30分钟有氧, 10分钟拉伸
目标: 8周内减脂5kg
"""
输出：

```json
{
  "best_category": "",
  "confidence_score": 0.3,
  "contains_sensitive_info": false,
  "sensitive_types": [],
  "suggest_new_category": true,
  "suggested_category_name": "健康/健身计划",
  "suggested_keywords": ["健身", "锻炼", "减脂", "健康", "运动计划"]
}
```

## 多语言支持说明

请注意，输入的文本可能包含中文、日文或英文。你需要能够理解并正确分类这三种语言的内容。未来可能会扩展支持其他语言。

```

### 6.3 优化提示词（增强版）

```markdown
## 分类决策优先级
在做出分类决策时，请按照以下优先级考虑：

1. 精确关键词匹配：如果文本中出现与某分类关联的精确关键词，优先考虑该分类。
2. 主题语义理解：即使没有精确关键词匹配，也要理解文本的整体主题和上下文。
3. 用户历史偏好：考虑用户过去的分类决策模式，特别是对类似内容的处理。
4. 内容重要性：对正式文档、代码、学术内容等重要信息给予特别关注。

## 敏感信息识别指南
识别以下类型的敏感信息，但不限于此：

1. 个人身份信息：姓名、身份证号、地址、电话等
2. 财务信息：银行账号、信用卡信息、交易记录、工资单等
3. 账户凭证：用户名、密码、API密钥、访问令牌等
4. 商业机密：未公开的财报、产品计划、商业协议等
5. 健康信息：病历、处方、诊断结果等

## 跨语言理解增强
你需要理解不同语言中表达相同概念的方式。例如：

- 编程相关：
  - 中文："变量声明"、"函数调用"、"循环结构"
  - 英文："variable declaration"、"function call"、"loop structure"
  - 日文："変数宣言"、"関数呼び出し"、"ループ構造"

- 财务相关：
  - 中文："资产负债表"、"利润表"、"现金流量"
  - 英文："balance sheet"、"income statement"、"cash flow"
  - 日文："貸借対照表"、"損益計算書"、"キャッシュフロー"

在分类过程中，请注意识别这些跨语言的等效表达。
```

### 6.4 最终注意事项

```markdown
## 重要提示
1. 分类决策应当简洁明确，直接提供JSON结果，不要包含解释或分析。
2. 保持低计算资源消耗，确保分类过程高效快速。
3. 尊重用户隐私，不存储或传输任何敏感信息内容。
4. 如果置信度低于0.6，建议考虑创建新分类或将内容归入"未分类"目录。
5. 当内容非常短或信息量不足时，不要过度解读，可以标记为"信息不足"。
```

## 7. 未来迭代考虑

### 7.1 功能扩展

- 支持更多截图来源（如第三方应用）
- 提供简单的截图编辑功能
- 云同步功能（保持多设备分类一致）
- 统计分析功能（查看截图习惯和分类分布）
- 批量处理历史截图

### 7.2 技术优化

- 进一步优化 OCR 识别速度和准确性
- 改进 AI 分类算法，降低误分类率
- 提高系统资源使用效率
- 扩展对更多语言的支持

### 7.3 用户体验提升

- 提供更丰富的通知选项
- 增加键盘快捷键自定义
- 集成更多第三方服务（如云存储、协作工具等）
- 开发移动端配套应用

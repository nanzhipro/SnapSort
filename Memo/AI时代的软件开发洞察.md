# SnapSort 开发经验总结：AI时代的软件开发洞察

> 基于 SnapSort 项目开发日志的经验性总结与思考

---

## 🚀 AI时代的开发模式变革

### 1. **从传统开发到AI协作开发的范式转变**

**核心洞察**：传统的瀑布模型和敏捷开发在AI时代已不再适用。AI开发是一个"设定边界后不断尝试"的过程。

**实践经验**：

- 代码不再是"辛苦成果物"，而是"即时获得的内容"
- 删除重写代码不再是负担，而是正常的迭代过程
- "不符合预期就废弃，符合预期就保留"的快速验证循环
- 解决了传统开发中需求变更和bug修复的冲突问题

**开发日志原文**：
> "果断放弃传统的研发模式，如瀑布开发模型，敏捷开发模式。这些模式在AI时代，似乎并不匹配。AI研发，是一个设定好边界后，不断尝试的过程。"

### 2. **文档驱动的开发方式**

**核心发现**：文档化成为AI开发的核心，"定义清晰，内容详实的文档，可以更好利用AI的超强能力"

**最佳实践**：

- 准备两份PRD：产品PRD（给人看）+ 技术PRD（给AI看）
- 利用Context7、Firecrawl等平台将API文档markdown化
- 编码规范、文档规范、设计规范在AI时代变得更加重要
- 文档需要随项目进行及时更新，避免与实际项目不一致

**技术工具推荐**：

- **Context7平台**：<https://context7.com/> - 将GitHub仓库文档化
- **Firecrawl平台**：<https://www.firecrawl.dev/> - 将网页内容转换为markdown

### 3. **精准上下文胜过海量上下文**

**重要发现**：不是越多的上下文越好，而是越精准的上下文越好

**实践策略**：

- 模块化开发：把组件当成开源SDK，提供精准的API调用
- 单独设计和测试组件，可复用、可独立编译
- 避免过多上下文导致AI输出意外代码
- 语言表达需要更加精准，否则AI会输出意外的代码结构

**开发日志原文**：
> "Cursor也好，或者其他AI Coding也好，有时候不是越多的上下文越好。准确说，应该是越精准的上下文越好。"

---

## 🛠️ 技术架构与工程实践

### 4. **组件化设计系统**

**设计原则**：

- 所有组件放在 `Views/Components` 目录
- 使用MVVM架构分层管理
- 遵循Swift API设计规范
- 创建可复用、接口清晰的组件

**目录结构规范**：

```
Views/
├── Components/     # 可复用组件
ViewModels/        # 视图模型
Models/           # 数据模型
Resources/
└── Localization/ # 国际化文件
```

### 5. **现代化技术栈选择**

**技术决策**：

- 优先使用SwiftUI而非AppKit
- 支持macOS 15+的现代Swift编程模式
- 选择AI友好的技术（如SQLite而非SwiftData）
- 使用现代的Swift和SwiftUI编程模式

**技术选型考虑**：
> "SwiftData虽然高级，但并非AI擅长的，2023年的框架，AI能学到的也不多。"

### 6. **质量保障机制**

**实践方法**：

- 每次修改后自动执行xcodebuild编译
- 使用swift-format格式化规范
- 遵循Apple推荐的App设计标准
- 始终使用xcodebuild编译确保代码质量

**代码规范**：

```swift
//
//  {FileName}.swift
//  {ProjectName}
//
//  Created by CursorAI on {CurrentDate}.
//
```

---

## 🎯 AI协作的最佳实践

### 7. **模型选择策略**

**经验总结**：

- **小问题修改**：使用DeepSeek v3或Sonnet 3.5效果更好
- **复杂架构设计**：使用更强的模型如Claude Sonnet 4
- **避免过度发挥**：牛的模型不一定适合所有场景
- **Token管理**：O3 Max是Token炸弹，需谨慎使用

**开发日志原文**：
> "如果是修改一个小问题（如何定义小问题，这需要结合项目实况）并非越牛的模型越好，牛的模型，可能会过度发挥。"

### 8. **提示词工程**

**核心技巧**：

- Chat不仅是提示词，也是操作入口
- 使用流程图（如Mermaid）规划模块串联
- 让AI先学习其他App样式作为参考
- 结构化输出：利用思维链（CoT）方法

**实践示例**：
> "Chat不单单是提示词，也可以使操作入口。如：使用xcodebuild编译一下，如果有错误，请修改"

### 9. **开发流程优化**

**实践经验**：

- 功能优先，简化视觉样式
- 先模块化独立开发，再用流程图串联
- 删除过时文档，保持文档与项目一致性
- 测试通过后使用流程图规划串联

**流程建议**：

1. 模块化设计 → 2. 独立开发测试 → 3. 流程图串联 → 4. 整体集成

---

## 📊 工具链与平台生态

### 10. **开发工具进化**

**观察记录**：

- **Cursor进化**：从0.50到1.0的快速迭代，完全打造了全新的开发者IDE
- **功能增强**：可以导出聊天记录，记录AI协作过程
- **收费模式**：Usage-Based收费模式提供更大灵活性
- **模式切换**：超过500次请求后可选择慢速模式或付费继续快速模式

**开发日志原文**：
> "Cursor版本升级到1.0了，一天一天看着Cursor在成长，完全打造了一个全新的开发者IDE。"

### 11. **发布与分发策略**

**实践发现**：

- **AppStore限制**：需要沙盒，限制了某些功能（如SnapSort需要自由读写用户目录）
- **Homebrew发布**：是很好的替代方案
- **自建仓库**：可以解决官方仓库的限制
- **知名度要求**：发布到brew官方需要一定的star和知名度

**成功案例**：

```bash
brew install --cask snapsort
# 成功发布到自建Homebrew仓库
```

### 12. **技术调研工具**

**推荐平台**：

- **Context7**：GitHub仓库文档化
- **Firecrawl**：网页内容markdown化
- **Lovart**：AI生成AppIcon
- **各种MCP Server**：增强AI能力

---

## 🎨 设计与用户体验

### 13. **UI设计的AI协作**

**经验分享**：

- UI比功能逻辑更难用AI实现
- 提供参考页面样式比直接描述更有效
- 使用截图作为设计参考（如Shottr App设置页面）
- Apple原生视觉样式优于自定义设计

**开发日志原文**：
> "相较于其功能逻辑来说，还是UI比较难写，对AI来说也是一样。UI设计到布局，交互，视觉，易用性等等问题，综合性更强一些。"

### 14. **设计工具与资源**

**实用工具**：

- **Lovart**：AI生成AppIcon，效果非常好
- **参考截图**：让AI学习其他App样式比直接绘制视觉稿效率更高
- **原生组件**：优先使用SwiftUI原生组件

### 15. **用户引导与设置**

**设计思考**：

- 需要用户引导和设置页面
- 功能优先，视觉简化
- 遵循Apple设计规范

---

## 💡 架构设计与技术方案

### 16. **数据存储方案**

**技术选型**：

- **SQLite**：简单文档，结构化良好，AI友好
- **数据模型**：以图片文件为关键Key
- **表结构**：ImageFilePath, Classification, FullText

### 17. **系统集成挑战**

**实际问题**：

- **沙盒限制**：无法读取其他App的UserDefaults
- **权限管理**：需要用户授权访问特定目录
- **线程问题**：NSMetadataQuery必须在主线程/主RunLoop中启动

**解决方案**：

- 使用MainActor.run确保在主线程执行
- 统一生命周期管理
- 集中错误处理

### 18. **API集成策略**

**最佳实践**：

- 选择OpenAI兼容的API（如DeepSeek）
- 使用成熟的SDK（如MacPaw/OpenAI）
- 支持多个AI服务提供商切换
- 使用结构化输出格式

---

## 🔍 调试与问题解决

### 19. **常见问题模式**

**典型问题**：

- **监听失效**：ScreenshotMonitor在命令行工作，在App中失效
- **线程问题**：工作线程vs权限问题的区分
- **沙盒限制**：功能需求与系统限制的冲突

**解决思路**：

- 单独模块验证
- 逐步集成测试
- 权限和线程问题分别排查

### 20. **开发验证流程**

**验证策略**：

- 先写demo验证关键模块
- 命令行工具独立测试
- 逐步集成到主应用

**成功案例**：
> "ScreenshotMonitor 组件demo运行良好"

---

## 🌟 未来展望与思考

### 21. **开发者角色转变**

**深度思考**：

- 人类角色从"编码者"转为"协调者"
- "如果AI能做，我就不做，我只做确认"
- 数字化内容完全可以交给AI完成
- 人类专注于操作、打通流程、协调

**挑战目标**：
> "这次的挑战目标就是：如果AI能做，我就不做，我只做确认。"

### 22. **持续学习与分享**

**实践建议**：

- 每周形成开发报告，输出到社交媒体
- 记录AI协作过程，形成经验积累
- 把开发过程当作学习AI的机会
- 导出聊天记录，记录AI协作写作过程

### 23. **技术趋势观察**

**行业变化**：

- AI工具快速迭代（如Cursor的快速发展）
- 开发模式根本性变革
- 文档化成为核心竞争力
- 人机协作成为新常态

---

## 📋 核心经验总结

### 🎯 **五大核心原则**

1. **文档是AI开发的核心**：精准的文档胜过海量的代码
2. **快速验证循环**：设定边界→AI输出→验证→保留/废弃
3. **模块化思维**：组件化、可复用、接口清晰
4. **工具链整合**：善用Context7、Firecrawl等平台
5. **角色重新定义**：从编码者转为协调者和决策者

### 🛠️ **技术实践要点**

- **架构设计**：MVVM + 组件化 + 服务总线
- **代码规范**：Swift API设计规范 + swift-format
- **质量保障**：xcodebuild自动编译 + 模块化测试
- **文档管理**：产品PRD + 技术PRD + API文档markdown化
- **工具选择**：AI友好的技术栈 + 成熟的开源库

### 🚀 **开发流程优化**

1. **需求分析** → 产品PRD + 技术PRD
2. **技术调研** → 文档化 + demo验证
3. **模块开发** → 独立设计 + 单独测试
4. **集成联调** → 流程图规划 + 整体验证
5. **发布部署** → 多渠道分发 + 用户反馈

### 💡 **AI协作心得**

- **模型选择**：根据任务复杂度选择合适的模型
- **上下文管理**：精准胜过海量，质量胜过数量
- **提示词工程**：结构化输出 + 思维链推理
- **迭代策略**：快速试错 + 及时调整
- **学习态度**：把开发过程当作学习AI的机会

---

## 🎉 结语

这份开发日志记录了一个专业开发者在AI时代的深度思考和实践探索。从传统开发模式的颠覆，到AI协作开发的最佳实践，从技术架构的重新设计，到开发者角色的根本转变，每一个洞察都具有重要的参考价值。

**AI时代的软件开发不是简单的工具替换，而是整个开发范式的革命性变化。**

在这个变革的时代，保持学习的心态，拥抱新的开发模式，善用AI的能力，同时明确人类在其中的独特价值，这将是每个开发者都需要面对的挑战和机遇。

---

*基于 SnapSort 项目开发日志整理*  
*记录时间：2025-05-11 至 2025-06-13*  
*整理时间：2025-01-27*
